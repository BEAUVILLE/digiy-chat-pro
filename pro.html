<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <title>DIGIY PRO CHAT ‚Äî Canal client WhatsApp & Appels</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="DIGIY PRO CHAT ‚Äî Centralisez vos demandes clients, basculez en 1 clic vers WhatsApp ou un appel.">
    <meta name="theme-color" content="#020617">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800;900&family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        :root{
            --bg:#020617;
            --bg-soft:#030712;
            --card:#020617;
            --card-soft:#030712;
            --accent:#f97316;
            --accent-soft:#fed7aa;
            --accent-strong:#ea580c;
            --accent-whatsapp:#22c55e;
            --accent-call:#0ea5e9;
            --ink:#f9fafb;
            --ink-soft:#e5e7eb;
            --muted:#9ca3af;
            --line:#1f2937;
            --danger:#ef4444;
            --shadow-soft:0 24px 60px rgba(15,23,42,0.9);
            --radius-lg:24px;
            --radius-md:18px;
            --radius-pill:999px;
        }

        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
        }

        html{
            font-size:16px;
        }

        body{
            min-height:100vh;
            font-family:'Manrope', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background:radial-gradient(circle at top left,#1e293b 0,#020617 45%) fixed;
            color:var(--ink);
            display:flex;
            justify-content:center;
            align-items:stretch;
            padding:1.5rem;
        }

        .app{
            width:100%;
            max-width:1200px;
            background:radial-gradient(circle at top,#0b1220 0,#020617 55%);
            border-radius:32px;
            border:1px solid rgba(148,163,184,0.2);
            box-shadow:var(--shadow-soft);
            display:flex;
            flex-direction:column;
            overflow:hidden;
            position:relative;
        }

        .header{
            padding:1.25rem 1.75rem;
            border-bottom:1px solid rgba(148,163,184,0.25);
            display:flex;
            align-items:center;
            justify-content:space-between;
        }

        .brand{
            display:flex;
            align-items:center;
            gap:0.9rem;
        }

        .brand-logo{
            width:44px;
            height:44px;
            border-radius:18px;
            background:conic-gradient(from 160deg at 50% 50%,#f97316,#fb923c,#f97316,#facc15,#f97316);
            display:flex;
            align-items:center;
            justify-content:center;
            color:#0b1120;
            font-family:'Outfit',sans-serif;
            font-weight:900;
            font-size:1.5rem;
        }

        .brand-text-title{
            font-size:1.4rem;
            font-weight:900;
            background:linear-gradient(135deg,#f97316,#fed7aa);
            -webkit-background-clip:text;
            -webkit-text-fill-color:transparent;
        }

        .header-right{
            display:flex;
            align-items:center;
            gap:0.75rem;
        }

        .pill{
            padding:0.4rem 0.9rem;
            border-radius:999px;
            border:1px solid rgba(148,163,184,0.5);
            font-size:0.78rem;
            color:var(--ink-soft);
            background:rgba(15,23,42,0.85);
            display:flex;
            gap:0.4rem;
            align-items:center;
        }

        .layout{
            display:grid;
            grid-template-columns:0.9fr 1.4fr;
            min-height:520px;
        }

        .sidebar{
            border-right:1px solid rgba(30,64,175,0.4);
            display:flex;
            flex-direction:column;
        }

        .sidebar-header{
            padding:1rem 1.2rem;
        }

        .sidebar-title{
            font-size:0.95rem;
            color:var(--muted);
        }

        .chat-list{
            flex:1;
            overflow-y:auto;
            padding:0.6rem;
        }

        .chat-item{
            display:flex;
            gap:0.65rem;
            padding:0.55rem 0.6rem;
            border-radius:18px;
            cursor:default;
            margin-bottom:0.4rem;
            background:rgba(15,23,42,0.6);
        }

        .chat-avatar{
            width:36px;
            height:36px;
            border-radius:14px;
            background:radial-gradient(circle at 0 0,#f97316,#facc15);
            display:flex;
            justify-content:center;
            align-items:center;
            color:#0b1120;
            font-weight:800;
        }

        .main{
            display:flex;
            flex-direction:column;
        }

        .main-header{
            padding:1rem 1.5rem;
            border-bottom:1px solid rgba(30,64,175,0.4);
        }

        .messages{
            flex:1;
            overflow-y:auto;
            padding:1.1rem 1.5rem;
            display:flex;
            flex-direction:column;
            gap:0.6rem;
        }

        .msg-row{
            display:flex;
        }

        .msg{
            padding:0.7rem 0.9rem;
            border-radius:18px;
            max-width:75%;
        }

        .msg.client{
            background:rgba(15,23,42,0.9);
            border:1px solid rgba(51,65,85,0.9);
        }

        .msg.pro{
            background:linear-gradient(135deg,#f97316,#ea580c);
            color:#0b1120;
            font-weight:600;
        }

        .input-bar{
            padding:1rem;
            border-top:1px solid rgba(30,64,175,0.4);
            display:flex;
            gap:0.4rem;
        }

        .input-fake{
            flex:1;
            background:rgba(15,23,42,0.9);
            border-radius:999px;
            padding:0.7rem 1rem;
            color:var(--muted);
        }
    </style>
</head>

<body>

<div class="app">

    <header class="header">
        <div class="brand">
            <div class="brand-logo">D</div>
            <div>
                <div class="brand-text-title">DIGIY PRO CHAT</div>
                <div style="font-size:0.8rem;color:var(--muted);">Canal client unifi√© ‚Ä¢ WhatsApp & Appels</div>
            </div>
        </div>
        <div class="header-right">
            <div class="pill">‚ö° Mode d√©mo</div>
            <div class="pill">üü¢ En ligne</div>
        </div>
    </header>

    <div class="layout">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">Demandes clients (D√©mo)</div>
            </div>

            <div class="chat-list">
                <div class="chat-item"><div class="chat-avatar">F</div><div>Fama K. (Nouveau client)</div></div>
                <div class="chat-item"><div class="chat-avatar">M</div><div>Modou F. (AIBD ‚Üí Saly)</div></div>
                <div class="chat-item"><div class="chat-avatar">A</div><div>A√Øsha N. (Retour h√¥tel)</div></div>
            </div>
        </aside>

        <!-- MAIN PANEL -->
        <main class="main">
            <div class="main-header">
                <div style="font-size:1.1rem;font-weight:700;">Fama K. ‚Äî Transfert AIBD ‚Üí Saly</div>
                <div style="font-size:0.8rem;color:var(--muted);">Dernier message il y a 2 min</div>
            </div>

            <div class="messages">
                <div class="msg-row"><div class="msg client">Bonjour Lamine‚Ä¶</div></div>
                <div class="msg-row" style="justify-content:flex-end;"><div class="msg pro">Salam Fama üëã</div></div>
            </div>

            <div class="input-bar">
                <div class="input-fake">√âcrire une r√©ponse‚Ä¶</div>
            </div>

        </main>
    </div>
</div>


<!-- üî• SCRIPT FIREBASE CONNECT√â √Ä LA RTDB üî• -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
  import {
    getDatabase,
    ref,
    push,
    set,
    update,
    serverTimestamp
  } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBqEQWoE2iC7_rp-u4riilNVHolcP2o0B0",
    authDomain: "digiylyfe-ecosystem.firebaseapp.com",
    databaseURL: "https://digiylyfe-ecosystem-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "digiylyfe-ecosystem",
    storageBucket: "digiylyfe-ecosystem.firebasestorage.app",
    messagingSenderId: "1007962643384",
    appId: "1:1007962643384:web:20d26881e87f0dc37d0d4d"
  };

  const app = initializeApp(firebaseConfig);
  const db  = getDatabase(app);

  const CHAT_ROOM_ID = "exemple-chat-1";
  const PRO_ID       = "PRO_UID_001";
  const USER_ID      = "USER_UID_001";

  async function addDemoMessage() {
    const timestamp = serverTimestamp();

    await update(ref(db, `chat/${CHAT_ROOM_ID}`), {
      proId: PRO_ID,
      userId: USER_ID,
      lastMessageAt: timestamp
    });

    const msgRef = push(ref(db, `chat/${CHAT_ROOM_ID}/messages`));
    await set(msgRef, {
      from: "client",
      text: "Test DIGIY PRO CHAT depuis la vitrine",
      at: timestamp
    });

    console.log("üî• Message ajout√© :", msgRef.key);
  }

  window.addEventListener("DOMContentLoaded", () => {
    addDemoMessage()
      .then(() => console.log("üöÄ CONNECT√â √Ä LA RTDB"))
      .catch(err => console.error("‚ùå Erreur PRO CHAT :", err));
  });
</script>

</body>
</html>
